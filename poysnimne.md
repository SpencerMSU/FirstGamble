# Как устроены C++ файлы логики игр

Сейчас игровая логика держится на C++-реализациях и их JS-адаптерах. Ранние PHP-заглушки больше не используются во фронтенде или автотестах и удалены, чтобы не путать с актуальным кодом.

## Неоновый ритм (`ludka/pulse_logic.cpp`)
- **Цель файла:** симулировать появление и движение нот, а также проверку точного попадания по дорожкам.
- **Ключевые функции:** `step` двигает каждую ноту на основании скорости и дельты времени, удаляя улетевшие элементы; `isHit` возвращает `true`, если координата ноты попадает в допуск `window` вокруг целевой линии.
- **Использование:** держите вектор нот и передавайте позицию цели и окно точности — это та же формула, что применяет `ludka/pulse_logic_adapter.js` в `ludka/pulse.html`.

## Грави-ритм (`ludka/gravirun_logic.cpp`)
- **Цель файла:** шаг симуляции для потоков кристаллов, шипов и бустов на четырёх дорожках.
- **Ключевая функция:** `gravirun_step` генерирует новые объекты с постепенно ускоряющейся частотой, двигает их вниз и обрабатывает столкновения с игроком. Кристаллы дают очки (x2 под бустом), шипы отнимают жизнь без щита, буст даёт 1.5 секунды защиты и множитель.
- **Использование:** передавайте текущее состояние (позиции объектов, таймер спавна, очки, жизни, буст) и дельту времени. Это ровно та логика, которую вызывает `gravirun_logic_adapter.js` из `ludka/gravirun.html`.

## Змейка (`minigames/snake_logic.cpp`)
- **Цель файла:** рассчитывать следующий ход змейки на квадратной сетке и генерацию еды.
- **Ключевая функция:** `snake_step` принимает массив точек змейки, направление, позицию еды и размер поля, проверяет столкновения, двигает голову, добавляет сегмент при поедании еды и подбирает новую свободную клетку.
- **Использование:** функция возвращает структуру с обновлённой змейкой, позицией еды, флагом смерти и фактом поедания; эти же шаги повторяет `minigames/snake_logic_adapter.js` в `minigames/snake.html`.

## Почему PHP-файлов больше нет
Фронтенд и тесты уже работают через JS-адаптеры поверх C++-логики, поэтому PHP-прототипы оказались неиспользуемыми. Чтобы не поддерживать два стека и не путать интеграцию, PHP-версии удалены.

## Что установить на Linux, чтобы собрать и погонять
- Компилятор C++17+: `sudo apt-get install build-essential` (даст `g++`, `make`).
- (Опционально) `cmake` и `clang-format`, если хотите собирать/проверять стиль отдельных модулей.

После установки можно собирать, например: `g++ -std=c++17 -O2 ludka/gravirun_logic.cpp -o gravirun_logic`.
