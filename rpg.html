<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RPG ‚Äî FirstClub</title>
  <style>
:root{
  --bg:#0a0d12;
  --bg-2:#0e1117;
  --panel:#0d1117;
  --card:#111722;
  --card-2:#0f1520;
  --stroke: rgba(255,255,255,.06);
  --stroke-2: rgba(100,160,255,.25);
  --blue:#3b82f6;
  --blue-2:#1d4ed8;
  --text:#e6edf3;
  --muted:#98a2b3;
  --radius:18px;
  --radius-sm:12px;
  --shadow: 0 0 0 1px var(--stroke), 0 8px 30px rgba(0,0,0,.6);
}
html[data-theme="light"]{
  --bg:#f4f7fb;
  --bg-2:#eef2f7;
  --panel:#ffffff;
  --card:#ffffff;
  --card-2:#f6f8fb;
  --stroke: rgba(10,20,40,.08);
  --stroke-2: rgba(59,130,246,.35);
  --blue:#2563eb;
  --blue-2:#1d4ed8;
  --text:#0b1220;
  --muted:#52607a;
  --shadow: 0 0 0 1px var(--stroke), 0 10px 26px rgba(10,20,40,.08);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1000px 600px at 10% -10%, rgba(59,130,246,.28), transparent 60%),
    radial-gradient(800px 500px at 110% 0%, rgba(29,78,216,.22), transparent 55%),
    linear-gradient(180deg, var(--bg-2) 0%, var(--bg) 100%);
  min-height:100vh;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:16px;
}
.app{
  width:min(1100px,100%);
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0));
  border:1px solid var(--stroke);
  border-radius:20px;
  box-shadow: var(--shadow);
  padding:14px;
}
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 12px 14px;
  gap:10px;
}
.title{display:flex;flex-direction:column;gap:2px;}
.title h1{
  margin:0;font-size:20px;font-weight:800;letter-spacing:.2px;
  color: var(--text);
  text-shadow:0 0 18px rgba(59,130,246,.25);
}
.title span{font-size:12px;color:var(--muted);}

.balance-pill{
  margin-left:auto;
  display:flex;align-items:center;gap:8px;
  padding:7px 10px;border-radius:999px;
  font-weight:800;font-size:14px;
  background: linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
}
.balance-coin{filter: drop-shadow(0 0 6px rgba(59,130,246,.35));}

.back{
  display:inline-flex;align-items:center;gap:8px;
  padding:8px 12px;border-radius:10px;
  background: linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--stroke);
  color:var(--text);text-decoration:none;font-weight:700;font-size:14px;
  cursor:pointer;transition:.15s ease;
}
.back:hover{border-color:var(--stroke-2);transform:translateY(-1px);}

.grid{
  display:grid;
  grid-template-columns: 1.15fr .85fr;
  gap:12px;padding:0 4px 8px;
}
.col{display:grid;grid-template-columns:1fr;gap:12px;}
a.card-btn,button.card-btn{
  position:relative;display:block;text-align:left;
  background:
    radial-gradient(600px 220px at 10% -30%, rgba(59,130,246,.16), transparent 60%),
    linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--stroke);
  border-radius:var(--radius);
  padding:16px;min-height:96px;
  cursor:pointer;transition:.18s ease;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  overflow:hidden;color:inherit;text-decoration:none;
}
.card-btn:hover{
  transform: translateY(-1px);
  border-color: var(--stroke-2);
  box-shadow: 0 0 0 1px rgba(59,130,246,.25), 0 12px 30px rgba(8,12,18,.55);
}
.card-row{display:flex;gap:12px;align-items:flex-start;}
.icon{
  width:40px;height:40px;display:grid;place-items:center;
  background: rgba(59,130,246,.10);
  border:1px solid rgba(59,130,246,.25);
  border-radius:12px;font-size:20px;flex:0 0 auto;
  box-shadow: inset 0 0 20px rgba(59,130,246,.15);
}
.card-text h3{margin:0 0 4px;font-size:16px;font-weight:800;}
.card-text p{margin:0;font-size:12.5px;color:var(--muted);}

.section{
  background: linear-gradient(180deg, var(--panel) 0%, color-mix(in oklab, var(--panel) 92%, transparent) 100%);
  border:1px solid var(--stroke);
  border-radius:16px;
  padding:14px;
  box-shadow: var(--shadow);
}
.section h2{margin:0 0 10px;font-size:18px;}
.subgrid{
  display:grid;grid-template-columns:repeat(2,1fr);gap:10px;
}
.tile{
  background: linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--stroke);
  border-radius:14px;padding:12px;min-height:70px;
}
.tile h4{margin:0 0 4px;font-size:14.5px;}
.tile p{margin:0;font-size:12px;color:var(--muted);line-height:1.4;}

.footer{
  padding:10px 12px 6px;text-align:center;font-size:11px;color:var(--muted);
  border-top:1px dashed var(--stroke);margin-top:8px;line-height:1.6;
}

@media (max-width: 720px){
  .grid{grid-template-columns:1fr;}
  .card-btn{min-height:86px;}
  .subgrid{grid-template-columns:1fr;}
}
</style>
</head>
<body>
  <div class="app">
    <header>
      <a class="back" href="/">‚Üê –ù–∞–∑–∞–¥</a>
      <div class="title">
        <h1>RPG</h1>
        <span>–ü—Ä–æ–∫–∞—á–∫–∞, –∫–≤–µ—Å—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
      </div>
      <div class="balance-pill">
        <span class="balance-coin">ü™ô</span>
        <span id="balanceValue">0</span>
      </div>
    </header>

    

    <section class="section">
      <h2>–ü—Ä–æ—Ç–æ—Ç–∏–ø</h2>
      <div class="subgrid">
        <div class="tile"><h4>üìà –ü—Ä–æ–∫–∞—á–∫–∞</h4><p>–£—Ä–æ–≤–µ–Ω—å, –æ–ø—ã—Ç, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.</p></div>
<div class="tile"><h4>üßæ –ö–≤–µ—Å—Ç—ã</h4><p>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å.</p></div>
<div class="tile"><h4>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4><p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏/–Ω–∞–≥—Ä–∞–¥—ã.</p></div>
<div class="tile"><h4>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h4><p>–°–Ω–∞—Ä—è–≥–∞ –∏ –ª—É—Ç (–ø–æ–∑–∂–µ).</p></div>
      </div>
    </section>

    <div class="footer">
      –†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–∞—Ä–∫–∞—Å üéØ
    </div>
  </div>

  <script>
(function(){
  function setThemeVarsFromTelegram(){
    try{
      const tg = window.Telegram && window.Telegram.WebApp;
      if(!tg) return false;
      tg.ready(); tg.expand();
      const p = tg.themeParams || {};
      const bg = p.bg_color;
      const text = p.text_color;
      const hint = p.hint_color;
      const secondary = p.secondary_bg_color;
      if(bg) document.documentElement.style.setProperty("--bg", bg);
      if(secondary) document.documentElement.style.setProperty("--panel", secondary);
      if(text) document.documentElement.style.setProperty("--text", text);
      if(hint) document.documentElement.style.setProperty("--muted", hint);

      if(text){
        const isLight = isColorDark(text); // —Ç–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç => —Å–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω
        document.documentElement.setAttribute("data-theme", isLight ? "light" : "dark");
      }
      tg.setHeaderColor(bg || "#0a0d12");
      tg.setBackgroundColor(bg || "#0a0d12");
      return true;
    }catch(e){ return false; }
  }

  function isColorDark(hex){
    if(!hex || hex[0] !== "#") return false;
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    const luminance = (0.299*r + 0.587*g + 0.114*b)/255;
    return luminance < 0.5;
  }

  if(!setThemeVarsFromTelegram()){
    const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
    document.documentElement.setAttribute("data-theme", prefersLight ? "light" : "dark");
  }
})();
</script>
  <script>
const API_BASE = "https://api.firstgamble.ru";

// –ü—Ä–∏–º–µ—Ä—ã:
// 1) –µ—Å–ª–∏ –±–µ–∑ nginx: https://firstclub.ru:8080
// 2) –µ—Å–ª–∏ —á–µ—Ä–µ–∑ nginx proxy: https://api.firstclub.ru

function getTgUserId(){
  try {
    return window.Telegram?.WebApp?.initDataUnsafe?.user?.id || null;
  } catch(e){ return null; }
}

async function loadBalance(){
  const userId = getTgUserId();
  const valEl = document.getElementById("balanceValue");
  if(!valEl) return;

  if(!userId){
    const localBal = localStorage.getItem("balance_local") || "0";
    valEl.textContent = localBal;
    return;
  }

  try{
    const res = await fetch(`${API_BASE}/api/balance?user_id=${userId}`);
    const data = await res.json();
    valEl.textContent = data.balance ?? 0;
    localStorage.setItem("balance_local", valEl.textContent);
  }catch(e){
    const localBal = localStorage.getItem("balance_local") || "0";
    valEl.textContent = localBal;
  }
}

loadBalance();
</script>
  <script>
    // –µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –º–∞–≥–∞–∑–∏–Ω–∞ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –±–∞–ª–∞–Ω—Å–∞ ‚Äî –æ–±–Ω–æ–≤–∏–º
    const shopEl = document.getElementById("balanceValueShop");
    if (shopEl) shopEl.textContent = document.getElementById("balanceValue")?.textContent ?? "0";
  </script>
</body>
</html>
